<!DOCTYPE html>

<html lang="en">

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

	<title>Your Memory Stinks</title>
	
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	<link type="text/css" rel="stylesheet" href="style/style.css"></link>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</head>

<body>
	<header>
		<h1>Your Memory <span>Stinks</span></h1>
		<hr>
	</header>
	<h6>N E W _ G A M E</h6>
	<div class="container-fluid">
		<div class="row row-centered">
			<div class="col-xs-2 col-centered"><img id="0" class=img-responsive src=""></div>
			<div class="col-xs-2 col-centered"><img id="1" class=img-responsive src=""></div>
			<div class="col-xs-2 col-centered"><img id="2" class=img-responsive src=""></div>
			<div class="col-xs-2 col-centered"><img id="3" class=img-responsive src=""></div>
			<div class="col-xs-2 col-centered"><img id="4" class=img-responsive src=""></div>
			<div class="col-xs-2 col-centered"><img id="5" class=img-responsive src=""></div>
			<div class="col-xs-2 col-centered"><img id="6" class=img-responsive src=""></div>
			<div class="col-xs-2 col-centered"><img id="7" class=img-responsive src=""></div>
			<div class="col-xs-2 col-centered"><img id="8" class=img-responsive src=""></div>
			<div class="col-xs-2 col-centered"><img id="9" class=img-responsive src=""></div>
			<div class="col-xs-2 col-centered"><img id="10" class=img-responsive src=""></div>
			<div class="col-xs-2 col-centered"><img id="11" class=img-responsive src=""></div>
			<div class="col-xs-2 col-centered"><img id="12" class=img-responsive src=""></div>
			<div class="col-xs-2 col-centered"><img id="13" class=img-responsive src=""></div>
			<div class="col-xs-2 col-centered"><img id="14" class=img-responsive src=""></div>
			<div class="col-xs-2 col-centered"><img id="15" class=img-responsive src=""></div>
			<div class="col-xs-2 col-centered"><img id="16" class=img-responsive src=""></div>
			<div class="col-xs-2 col-centered"><img id="17" class=img-responsive src=""></div>
			<div class="col-xs-2 col-centered"><img id="18" class=img-responsive src=""></div>
			<div class="col-xs-2 col-centered"><img id="19" class=img-responsive src=""></div>
		</div>
	</div>
	<hr>

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
	<script type="text/javascript" language="javascript">
		
		var images = ["bison.jpg", "cat.jpg", "dog.jpg", "dolphin.jpg", "harambe.jpg", "horse.jpg", "kangaroo.jpg", "penguin.jpg", "sloth.jpg", "toucan.jpg", "bison.jpg", "cat.jpg", "dog.jpg", "dolphin.jpg", "harambe.jpg", "horse.jpg", "kangaroo.jpg", "penguin.jpg", "sloth.jpg", "toucan.jpg"];
		var isMatch = [];
		var counter = 0;
		var matches = 0;
		var scores = {};

		// Knuth shuffle http://stackoverflow.com/questions/2450954/how-to-randomize-shuffle-a-javascript-array
		function shuffle (array) {
			var currentIndex = array.length, temporaryValue, randomIndex;
			// While there remain elements to shuffle...
			while (0 !== currentIndex) {
				// Pick a remaining element...
				randomIndex = Math.floor(Math.random() * currentIndex);
				currentIndex -= 1;
				// And swap it with the current element.
				temporaryValue = array[currentIndex];
				array[currentIndex] = array[randomIndex];
				array[randomIndex] = temporaryValue;
			}
			return array;
		};

		function refresh(){
			var shuffled = shuffle(images);
			for (var i = 0; i < images.length ; i++){
				var id = ""+i;
				var element = document.getElementById(id);
				element.src = "images/"+shuffled[i];
			}
			matches=0;
			counter=0;
			console.log("New Game");
		}

		$(document).ready(function(){
			$('h6').click(function(event){
				event.preventDefault();
				refresh();
				$('img').animate({opacity: 0});
			});
		})

		$('img').click(function(){
			counter++;
			console.log(counter);
			isMatch.unshift(this);
			$('#'+isMatch[0].id).animate({opacity: 100});
			if (isMatch[0].src == isMatch[1].src && isMatch[0] != isMatch [1]) {
				console.log("MATCHES LEFT: ", 9-matches);
				$('#'+isMatch[0].id).animate({opacity: 100});
				$('#'+isMatch[1].id).animate({opacity: 100});
				isMatch=[];
				matches++;
				if (matches == 10){
					alert("You win! Your score is: "+counter);
					var session = document.cookie;
					scores[session] = counter;
					matches=0;
					counter=0;
					setTimeout(refresh(),3000);
					$('img').animate({opacity: 0});

				}
			} else {
				$('#'+isMatch[0].id).animate({opacity: 0});
				$('#'+isMatch[1].id).animate({opacity: 0});
				isMatch=[];
			}
		})
	</script>
</body>
</html>